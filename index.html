<!DOCTYPE html>
<html>
  <head>
    <title>Unifix Cubes</title>
    <meta charset="UTF-8" />
    <meta http-equiv="Cache-control" content="public" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />

    <meta
      name="viewport"
      id="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0"
    />
    <meta http-equiv="X-UA-Compatible" content="IE=10" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

    <link rel="stylesheet" type="text/css" href="css/croquispop.css" />

    <link rel="stylesheet" type="text/css" href="css/main.css" />
    <link
      href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css"
      rel="stylesheet"
    />
    <script type="text/javascript" src="js/loader.js"></script>
    <script type="text/javascript" src="js/libs/jquery-1.10.2-min.js"></script>
    <script type="text/javascript" src="js/libs/jquery-ui.min.js"></script>
    <script
      type="text/javascript"
      src="js/libs/jquery-ui-touch-punch-0.2.2.js"
    ></script>

    <script type="text/javascript" src="js/libs/hittest.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
    <style>
      /* floating cursor image */
      #cursor-ghost {
        position: fixed;
        width: 32px;
        height: 32px;
        pointer-events: none;
        z-index: 999999;
        display: none;
        image-rendering: auto;
      }
      /* hide the native cursor only over the drawing/stage area */
      .hide-native-cursor #canvas-area,
      .hide-native-cursor #canvas-area canvas,
      .hide-native-cursor .drop-box-container,
      .hide-native-cursor .drop-box-container canvas {
        cursor: none !important;
      }
    </style>
  </head>
  <!-- cube action menu -->

  <body>
    <!-- <div id="canvas-area"></div> -->
    <div class="canvas-container">
      <canvas id="draw"></canvas>


    </div>

    <div acc-id="main-container" class="main-container-block">
      <div acc-id="act-container">
        <div class="tool-container tool-container-theme ui-droppable">
          <div class="tool-grp">
            <div class="cube-container-block">
              <div
                id="cube1"
                tempid="cube1"
                class="cubes clickable ui-draggable"
                rotateval="0"
              >
                <div class="spearateCubes">
                  <img
                    style="width: 55%; height: 50%"
                    src="assets/images/arrow.png"
                  />
                </div>
                <div id="uppercont" class="uppercont connector"></div>
                <div id="downcont" class="downcont connector"></div>
                <img
                  style="width: 100%; height: 100%"
                  src="assets/images/cube1.png"
                />
              </div>

              <div
                id="cube2"
                tempid="cube2"
                class="cubes clickable ui-draggable"
              >
                <div class="spearateCubes">
                  <img
                    style="width: 55%; height: 50%"
                    src="assets/images/arrow.png"
                  />
                </div>
                <div id="uppercont" class="uppercont connector"></div>
                <div id="downcont" class="downcont connector"></div>
                <img
                  style="width: 100%; height: 100%"
                  src="assets/images/cube2.png"
                />
              </div>

              <div
                id="cube3"
                tempid="cube3"
                class="cubes clickable ui-draggable"
              >
                <div class="spearateCubes">
                  <img
                    style="width: 55%; height: 50%"
                    src="assets/images/arrow.png"
                  />
                </div>
                <div id="uppercont" class="uppercont connector"></div>
                <div id="downcont" class="downcont connector"></div>
                <img
                  style="width: 100%; height: 100%"
                  src="assets/images/cube3.png"
                />
              </div>

              <div
                id="cube4"
                tempid="cube4"
                class="cubes clickable ui-draggable"
              >
                <div class="spearateCubes">
                  <img
                    style="width: 55%; height: 50%"
                    src="assets/images/arrow.png"
                  />
                </div>
                <div id="uppercont" class="uppercont connector"></div>
                <div id="downcont" class="downcont connector"></div>
                <img
                  style="width: 100%; height: 100%"
                  src="assets/images/cube4.png"
                />
              </div>

              <div
                id="cube5"
                tempid="cube5"
                class="cubes clickable ui-draggable"
              >
                <div class="spearateCubes">
                  <img
                    style="width: 55%; height: 50%"
                    src="assets/images/arrow.png"
                  />
                </div>
                <div id="uppercont" class="uppercont connector"></div>
                <div id="downcont" class="downcont connector"></div>
                <img
                  style="width: 100%; height: 100%"
                  src="assets/images/cube5.png"
                />
              </div>

              <div
                id="cube6"
                tempid="cube6"
                class="cubes clickable ui-draggable"
              >
                <div class="spearateCubes">
                  <img
                    style="width: 55%; height: 50%"
                    src="assets/images/arrow.png"
                  />
                </div>
                <div id="uppercont" class="uppercont connector"></div>
                <div id="downcont" class="downcont connector"></div>
                <img
                  style="width: 100%; height: 100%"
                  src="assets/images/cube6.png"
                />
              </div>

              <div
                id="cube7"
                tempid="cube7"
                class="cubes clickable ui-draggable"
              >
                <div class="spearateCubes">
                  <img
                    style="width: 55%; height: 50%"
                    src="assets/images/arrow.png"
                  />
                </div>
                <div id="uppercont" class="uppercont connector"></div>
                <div id="downcont" class="downcont connector"></div>
                <img
                  style="width: 100%; height: 100%"
                  src="assets/images/cube7.png"
                />
              </div>

              <div
                id="cube8"
                tempid="cube8"
                class="cubes clickable ui-draggable"
              >
                <div class="spearateCubes">
                  <img
                    style="width: 55%; height: 50%"
                    src="assets/images/arrow.png"
                  />
                </div>
                <div id="uppercont" class="uppercont connector"></div>
                <div id="downcont" class="downcont connector"></div>
                <img
                  style="width: 100%; height: 100%"
                  src="assets/images/cube8.png"
                />
              </div>

              <div
                id="cube9"
                tempid="cube9"
                class="cubes clickable ui-draggable"
              >
                <div class="spearateCubes">
                  <img
                    style="width: 55%; height: 50%"
                    src="assets/images/arrow.png"
                  />
                </div>
                <div id="uppercont" class="uppercont connector"></div>
                <div id="downcont" class="downcont connector"></div>
                <img
                  style="width: 100%; height: 100%"
                  src="assets/images/cube9.png"
                />
              </div>

              <div
                id="cube10"
                tempid="cube10"
                class="cubes clickable ui-draggable"
              >
                <div class="spearateCubes">
                  <img
                    style="width: 55%; height: 50%"
                    src="assets/images/arrow.png"
                  />
                </div>
                <div id="uppercont" class="uppercont connector"></div>
                <div id="downcont" class="downcont connector"></div>
                <img
                  style="width: 100%; height: 100%"
                  src="assets/images/cube10.png"
                />
              </div>

              <div
                id="cube11"
                tempid="cube11"
                class="cubes clickable ui-draggable"
              >
                <div class="spearateCubes">
                  <img
                    style="width: 55%; height: 50%"
                    src="assets/images/arrow.png"
                  />
                </div>
                <div id="uppercont" class="uppercont connector"></div>
                <div id="downcont" class="downcont connector"></div>
                <img
                  style="width: 100%; height: 100%"
                  src="assets/images/cube11.png"
                />
              </div>
              <div
                id="cube12"
                tempid="cube12"
                class="cubes clickable ui-draggable"
              >
                <div class="spearateCubes">
                  <img
                    style="width: 55%; height: 50%"
                    src="assets/images/arrow.png"
                  />
                </div>
                <div id="uppercont" class="uppercont connector"></div>
                <div id="downcont" class="downcont connector"></div>
                <img
                  style="width: 100%; height: 100%"
                  src="assets/images/cube12.png"
                />
              </div>
            </div>
            <div class="secondmenubar">
             
              <div class="menubar-conatiner">
                 <div class="">
                 <div class="toolbar">
                    <div
                      class="tool pencil"
                      data-tool-tip="Pencil Tool"
                      id="pencilTool"
                    ></div>
                    <div
                      class="tool eraser"
                      data-tool-tip="Eraser Tool"
                      id="eraserTool"
                    ></div>
                  </div>

      <!-- Pencil Control Panel -->
                  <div class="control-panel hide" id="pencilPanel">
                    <div class="panel-header">
                      <div class="panel-title">Pencil Settings</div>
                      <div class="close-btn" id="closePencilPanel">âœ•</div>
                    </div>
                    <label for="pencilBrushSize">Pencil Size</label>
                    <input
                      type="range"
                      class="brushSize"
                      id="pencilBrushSize"
                      value="5"
                      min="1"
                      max="50"
                    />
                    <div class="brush-size-preview" id="pencilBrushSizePreview" style="margin-top: 8px;margin-bottom: 5px;"></div>

                    <label for="pencilBrushOpacity">Opacity</label>
                    <input
                      type="range"
                      class="brushOpacity"
                      id="pencilBrushOpacity"
                      value="1"
                      min="0.1"
                      max="1"
                      step="0.1"
                    />

                    <div class="color-selector">
                      <label for="pencilColorPicker">Color</label>
                      <input type="color" id="pencilColorPicker" value="#e53935" />
                      <div class="color-preview" id="pencilColorPreview"></div>
                    </div>
                  </div>

    <!-- Eraser Control Panel -->
                  <div class="control-panel hide" id="eraserPanel">
                    <div class="panel-header">
                      <div class="panel-title">Eraser Settings</div>
                      <div class="close-btn" id="closeEraserPanel">âœ•</div>
                    </div>
                    <label for="eraserBrushSize">Eraser Size</label>
                   

                    <input
                      type="range"
                      class="brushSize"
                      id="eraserBrushSize"
                      value="10"
                      min="1"
                      max="50"
                    />
                     <div class="brush-size-preview" id="eraserBrushSizePreview" style="margin-top: 8px;margin-bottom: 5px;"></div>
                    <label for="eraserBrushOpacity">Opacity</label>
                    <div style="display: none;" class="brush-opacity-preview" id="eraserBrushOpacityPreview"></div>
<input type="range" class="brushOpacity" id="eraserBrushOpacity" value="1" min="0.1" max="1" step="0.1">
                  </div>
              </div>
                
                <div class="eraser-Block">
                  <label>Eraser</label>
                  <div id="eraser" class="clickable" style="opacity: 0.6">
                    <img
                      style="width: 100%; height: 100%"
                      src="assets/images/deleteCube.png"
                    />
                  </div>
                </div>
                <div class="undoresress-block">
                  <label>Clear</label>
                  <div id="undo" class="clickable disabled">
                    <img
                      style="width: 88%; height: 88%; margin-top: 2px"
                      src="assets/images/rotate.png"
                    />
                  </div>
                </div>
              </div>

              <div class="menubar-conatiner" >
                <div id="undore" class="clickable disabled" title="Undo">
                  <img
                    style="width: 35px; height: 35px"
                    src="assets/images/undo.png"
                  />
                </div>
                <div id="redore" class="clickable disabled" title="Redo">
                  <img
                    style="width: 35px; height: 35px"
                    src="assets/images/redo.png"
                  />
                </div>
              </div>

              <div
                class="menubar-conatiner themechanger-mobile"
               
              >
                <div id="groupCount" class="clickable">
                  <img
                    style="width: 40px; height: 40px"
                    src="assets/images/groupcount.png"
                  />
                </div>
                <div id="screenshot" class="screenshot-btn">
                  <img
                    style="width: 40px; height: 40px"
                    src="assets/images/screenshot.png"
                  />
                </div>
                
                 <div class="themechnager-menubar">
              <h3>
                <img
                  style="width: 18px; margin: -4px; margin-left: 0px"
                  src="assets/images/cubeicon/paint.png"
                />&nbsp; Select Theme
              </h3>
              <select id="themeSelect" class="themeSelect">
                <optgroup label="ðŸ–¼ï¸ Image Themes">
                  <option value="hill">Hill</option>
                  <option value="candy">Candy</option>
                  <option value="sky">Sky</option>
                  <option value="playground">Playground</option>
                  <option value="water">Water</option>
                </optgroup>
                <optgroup label="ðŸŽ¬ Video Themes">
                  <option value="car">Car Play</option>
                  <option value="space">Space</option>
                </optgroup>
                <optgroup label="ðŸŽ¨ Default Themes">
                  <option value="white">White</option>
                  <option value="black">Black</option>
                </optgroup>
              </select>
                 </div>
              </div>
              
            </div>
              <div class="cubecnager">
                 <label>Cube Shape</label>
                  <select id="cubeTypeSelector">
                    <option value="kids" selected>Kids Cube</option>
                    <option value="raw">Raw Cube</option>
                    <option value="2d">2D Cube</option>
                  </select>
              </div>
          </div>
        </div>

        <div class="drop-container">
          <div class="drop-box-container ui-droppable"></div>
        </div>
      </div>
    </div>

    <div id="cubeMenu" class="cube-menu" style="position: absolute">
      <div
        id="cubeMenuMessage"
        class="cube-menu-message"
        style="display: none"
      ></div>
      <div class="cube-menu-section">Cube Actions</div>
      <button data-action="lock">
        <img src="assets/images/cubeicon/padlock.png" /> Lock Cube
      </button>
      <button data-action="unlock" style="display: none">
        <img src="assets/images/cubeicon/tools.png" /> Unlock Cube
      </button>
      <hr />
      <button data-action="duplicate">
        <img src="assets/images/cubeicon/duplicate.png" /> Duplicate Cube
      </button>
      <button data-action="rotate">
        <img src="assets/images/cubeicon/loop-arrow.png" /> Rotate Cube
      </button>
      <button data-action="changeColor">
        <img src="assets/images/cubeicon/change-management.png" /> Change Cube
      </button>
      <hr />
      <button data-action="download">
        <img src="assets/images/cubeicon/download.png" /> Download as PNG
      </button>
      <button data-action="copy">
        <img src="assets/images/cubeicon/copy.png" /> Copy Cube
      </button>
      <button data-action="paste" style="display: none">
        <img src="assets/images/cubeicon/paste.png" /> Paste Cube
      </button>
      <hr />
      <button data-action="delete">
        <img src="assets/images/cubeicon/laundry-basket.png" /> Delete Cube
      </button>
      <button data-action="deleteGroup" style="display: none">
        <img src="assets/images/cubeicon/delete.png" /> Delete Group
      </button>
      <button data-action="properties">
        <img src="assets/images/cubeicon/properties.png" /> Cube Properties
      </button>
    </div>
    <div id="colorPicker" class="color-picker-popup" style="display: none">
      <div style="margin-bottom: 8px">Select a color:</div>
      <div id="colorOptions">
        <!-- Color options will be generated here -->
      </div>
    </div>

    <!-- Cube Properties Modal -->
    <div id="cubePropertiesModal" class="cube-properties-modal">
      <div class="cube-properties-content">
        <div class="cube-properties-header">
          <div class="cube-properties-title">Cube Properties</div>
          <button class="close-properties">&times;</button>
        </div>

        <div class="properties-list">
          <!-- <div class="property-item">
            <span class="property-label">Temporary ID:</span>
            <span id="propTempId" class="property-value">-</span>
          </div> -->
          <div class="property-item">
            <span class="property-label">Status:</span>
            <span id="propLockStatus" class="property-value">-</span>
          </div>
          <div class="property-item">
            <span class="property-label">Rotation:</span>
            <span id="propRotation" class="property-value">-</span>
          </div>
          <div class="property-item">
            <span class="property-label">Cubes in Group:</span>
            <span id="propCubesInGroup" class="property-value">-</span>
          </div>
          <div class="property-item">
            <span class="property-label">Cube Position:</span>
            <span id="propCubePosition" class="property-value">-</span>
          </div>
          <!-- <div class="property-item">
            <span class="property-label">Color:</span>
            <span id="propColor" class="property-value">-</span>
          </div> -->
          <div class="property-item">
            <span class="property-label">Connectors:</span>
            <span id="propConnectors" class="property-value">-</span>
          </div>
        </div>
      </div>
    </div>
    <video
      id="videoBackground"
      autoplay
      muted
      loop
      style="
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        object-fit: fill;
        z-index: -2;
        display: none;
      "
    ></video>
  </body>

  <script type="text/javascript" src="js/act.js"></script>
  <!-- <script type="text/javascript" src="js/sreenshoot.js"></script> -->

  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

  <script src="js/croquis/croquis.js"></script>
  <script src="js/croquispop.js"></script>
  <script src="js/theme.js"></script>
  <script src="js/cube.js"></script>

  <!-- <script>
    (function () {
      // Create the floating cursor element once
      const ghost = document.createElement("img");
      ghost.id = "cursor-ghost";
      document.body.appendChild(ghost);

      // Try to find your stage element(s)
      const stage =
        document.querySelector(".drop-box-container") ||
        document.querySelector("#canvas-area") ||
        document.body;

      let activeTool = null; // 'pen' | 'eraser' | null

      function setToolCursor(tool) {
        activeTool = tool; // remember
        if (tool) {
          // pick your own images if you want
          ghost.src =
            tool === "pen"
              ? "assets/images/pencil.png"
              : "assets/images/eraser.png";

          // position tweak so the tip feels right
          ghost.style.transform =
            tool === "pen"
              ? "translate(-4px, -28px)" // pen tip
              : "translate(-16px, -16px)"; // eraser center

          ghost.style.display = "block";
          document.body.classList.add("hide-native-cursor");
        } else {
          ghost.style.display = "none";
          document.body.classList.remove("hide-native-cursor");
        }
      }

      // Follow the pointer
      function moveGhost(e) {
        if (!activeTool) return;
        ghost.style.left = e.clientX + "px";
        ghost.style.top = e.clientY + "px";
      }
      document.addEventListener("pointermove", moveGhost);

      // Hide when leaving stage, show when entering (if tool active)
      function inStage(e) {
        const r = stage.getBoundingClientRect();
        return (
          e.clientX >= r.left &&
          e.clientX <= r.right &&
          e.clientY >= r.top &&
          e.clientY <= r.bottom
        );
      }
      document.addEventListener("pointermove", (e) => {
        if (!activeTool) return;
        ghost.style.display = inStage(e) ? "block" : "none";
      });

      // Wire your buttons
      document.getElementById("pencil")?.addEventListener("click", function () {
        setToolCursor("pen");
        // your draw-mode activation can stay as-is (Croquis, etc.)
      });
      document.getElementById("eraser")?.addEventListener("click", function () {
        setToolCursor("eraser");
        // your eraser activation can stay as-is
      });

      // When switching back to move/select (e.g., starting to drag cubes), disable the custom cursor
      document.querySelectorAll(".cubes, #undo").forEach((el) => {
        el.addEventListener("mousedown", () => setToolCursor(null));
      });

      // Optional: default state on load
      setToolCursor(null);
    })();
  </script> -->
<!-- 
  <script>
    const containersd = document.body; // or the parent of tempItem

    const observer = new MutationObserver(() => {
      const blackBlock = document.querySelector(".main-container-block-black");

      document.querySelectorAll(".tempItem img").forEach((img) => {
        if (blackBlock) {
          // Invert if tempItem comes BEFORE blackBlock
          if (
            img.closest(".tempItem").compareDocumentPosition(blackBlock) &
            Node.DOCUMENT_POSITION_FOLLOWING
          ) {
            img.style.filter = "invert(1)";
          }
        } else {
          // Remove invert when blackBlock is gone
          img.style.filter = "";
        }
      });
    });

    // Start observing DOM changes
    observer.observe(containersd, { childList: true, subtree: true });
  </script> -->
  <!-- <script>
  function moveThemeChanger() {
    const themeChanger = document.querySelector('.themechnager-menubar');
    const secondMenuBar = document.querySelector('.secondmenubar');
    const mobileContainer = document.querySelector('.themechanger-mobile');

    if (!themeChanger || !secondMenuBar || !mobileContainer) return;

    if (window.innerWidth < 768) {
      // âœ… Move inside .themechanger-mobile
      if (themeChanger.parentElement !== mobileContainer) {
        mobileContainer.appendChild(themeChanger);
      }
    } else {
      // âœ… Move outside .secondmenubar
      if (secondMenuBar.nextElementSibling !== themeChanger) {
        secondMenuBar.insertAdjacentElement('afterend', themeChanger);
      }
    }
  }

  // Run on page load
  moveThemeChanger();

  // Run on window resize
  window.addEventListener('resize', moveThemeChanger);
</script> -->
  <!-- <script>
  function moveCubeChanger() {
    const cubeChanger = document.querySelector('.cubecnager');
    const secondMenuBar = document.querySelector('.secondmenubar');
    const themeChangerMobile = document.querySelector('.themechanger-mobile');

    if (!cubeChanger || !secondMenuBar || !themeChangerMobile) return;

    if (window.innerWidth < 768) {
      // âœ… Move outside (under .secondmenubar)
      if (secondMenuBar.nextElementSibling !== cubeChanger) {
        secondMenuBar.insertAdjacentElement('afterend', cubeChanger);
      }
    } else {
      // âœ… Move back inside .themechanger-mobile
      if (cubeChanger.parentElement !== themeChangerMobile) {
        themeChangerMobile.appendChild(cubeChanger);
      }
    }
  }

  // Run on page load
  moveCubeChanger();

  // Run on window resize
  window.addEventListener('resize', moveCubeChanger);
</script> -->
</html>
